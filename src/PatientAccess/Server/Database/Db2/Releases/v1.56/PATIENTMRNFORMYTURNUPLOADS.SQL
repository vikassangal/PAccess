--  Generate SQL 
--  Version:                   	V7R3M0 160422 
--  Generated on:              	05/30/21 23:52:45 
--  Relational Database:       	DVLG 
--  Standards Option:          	Db2 for i 
SET PATH *LIBL ; 
  
CREATE PROCEDURE PACCESS.PATIENTMRNFORMYTURNUPLOADS ( 
	IN P_HSP INTEGER , 
	IN P_FIRSTNAME VARCHAR(30) , 
	IN P_LASTNAME VARCHAR(30) , 
	IN P_DOB VARCHAR(8) ) 
	DYNAMIC RESULT SETS 4 
	LANGUAGE SQL 
	SPECIFIC PACCESS.PATFORUPL 
	NOT DETERMINISTIC 
	MODIFIES SQL DATA 
	CALLED ON NULL INPUT 
	SET OPTION  ALWBLK = *ALLREAD , 
	ALWCPYDTA = *OPTIMIZE , 
	COMMIT = *NONE , 
	DBGVIEW = *SOURCE , 
	DECRESULT = (31, 31, 00) , 
	DLYPRP = *NO , 
	DYNDFTCOL = *NO , 
	DYNUSRPRF = *USER , 
	SRTSEQ = *HEX   
	P1 : BEGIN 
DECLARE CURSOR1 CURSOR FOR 
  
SELECT 
P . MDMRC# AS MRN 
FROM HPADMDP P 
  
WHERE P . MDHSP# = P_HSP AND 
  
UPPER ( TRIM ( P_FIRSTNAME ) ) = SUBSTR ( UPPER ( P . MDPFNM ) , 1 , 
( POSSTR ( UPPER ( P . MDPFNM ) , ' ' ) - 1 ) ) AND 
  
UPPER ( TRIM ( P_LASTNAME ) ) = 
UPPER ( TRIM ( P . MDPLNM ) ) AND 
  
TRIM ( P_DOB ) = TRIM ( P . MDDOB8 ) ; 
  
OPEN CURSOR1 ; 
  
END P1  ; 
  
GRANT ALTER , EXECUTE   
ON SPECIFIC PROCEDURE PACCESS.PATFORUPL 
TO HPPGMR WITH GRANT OPTION ; 
  
