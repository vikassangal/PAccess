--  Generate SQL 
--  Version:                   	V7R2M0 140418 
--  Generated on:              	08/09/18 04:30:18 
--  Relational Database:       	DVLA 
--  Standards Option:          	DB2 for i 
SET PATH *LIBL ; 
  
CREATE PROCEDURE PACCESS.SELECTCONTACTPOINTSFORGUARANTOR ( 
	IN P_FACILITY_ID INTEGER , 
	IN P_ACCOUNT_NUMBER INTEGER ) 
	DYNAMIC RESULT SETS 10 
	LANGUAGE SQL 
	SPECIFIC PACCESS.SELGARCONP 
	NOT DETERMINISTIC 
	MODIFIES SQL DATA 
	CALLED ON NULL INPUT 
	SET OPTION  ALWBLK = *ALLREAD , 
	ALWCPYDTA = *OPTIMIZE , 
	COMMIT = *NONE , 
	DBGVIEW = *SOURCE , 
	DECRESULT = (31, 31, 00) , 
	DFTRDBCOL = *NONE , 
	DLYPRP = *NO , 
	DYNDFTCOL = *NO , 
	DYNUSRPRF = *USER , 
	SRTSEQ = *HEX   
	P1 : BEGIN DECLARE CURSOR1 CURSOR FOR 
SELECT 0 AS ADDRESSID , 
TRIM ( GUAR . MGGAD1 ) AS ADDRESS1 , 
TRIM ( GUAR . MGGAD2 ) AS ADDRESS2 , 
TRIM ( GUAR . MGGAD1E1 ) AS ADDRESS1EXTENDED , 
TRIM ( GUAR . MGGAD1E2 ) AS ADDRESS2EXTENDED , 
TRIM ( GUAR . MGGCIT ) AS CITY , 
0 AS STATEID , 
GUAR . MGGSTE AS STATECODE , 
TRIM ( STATE . QTSTN ) AS STATEDESCRIPTION , 
RTRIM ( GUAR . MGGZPA ) || 
RTRIM ( GUAR . MGGZ4A ) AS POSTALCODE , 
0 AS COUNTRYID , 
'' AS COUNTRYCODE , 
'' AS COUNTRYDESCRIPTION , 
0 AS COUNTYID , 
'' AS COUNTYCODE , 
TRIM ( GUAR . MGGCNT ) AS COUNTYDESCRIPTION , 
'' AS PHONECOUNTRYCODE , 
GUAR . MGGACD AS AREACODE , 
GUAR . MGGPH# AS PHONENUMBER , 
GUAR . MGCLPH AS CELLPHONENUMBER , 
TRIM ( GUAR . MGEMAL ) AS EMAILADDRESS , 
TRIM ( GUAR . MGCLRK ) AS CELLPHONECONSENT , 
0 AS TYPEOFADDRESSID , 
'MAILING' AS ADDRESSDESCRIPTION , 0 AS TYPEOFCONTACTPOINTID , 
'MAILING' AS CONTACTPOINTDESCRIPTION  -- this is obsolete 
--ea.EmployerAddressNumber as EmployerAddressNumber 
FROM  HPADMGP GUAR LEFT OUTER JOIN 
 HPADQTSZ STATE 
ON GUAR . MGGSTE = STATE . QTKEY AND 
STATE . QTHSP# = 999 WHERE 
GUAR . MGHSP# = P_FACILITY_ID AND 
GUAR . MGGAR# = P_ACCOUNT_NUMBER ; OPEN CURSOR1 ; END P1  ; 
  
GRANT ALTER , EXECUTE   
ON SPECIFIC PROCEDURE PACCESS.SELGARCONP 
TO RMTGRPPRF WITH GRANT OPTION ; 
  
GRANT ALTER , EXECUTE   
ON SPECIFIC PROCEDURE PACCESS.SELGARCONP 
TO XAGRPPRF WITH GRANT OPTION ;
